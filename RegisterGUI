import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class RegisterGUI extends javax.swing.JFrame {

    // Creates new form RegisterGUI
    public RegisterGUI() {
        initComponents();
        setResizable(false);
        setSize(720, 410);
        setLocationRelativeTo(null); // center the window on the screen
    }

    private boolean isPasswordShown = false;

    // RegisterController contains all business logic for this GUI...
//    private RegisterController controller = new RegisterController();

    private javax.swing.JLabel lblTitle;
    private javax.swing.JLabel lblLogin;
    private javax.swing.JPanel pnlBg;
    private javax.swing.JPanel registerPanel;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JTextField txtFirstName;
    private javax.swing.JTextField txtLastName;
    private javax.swing.JTextField txtUserName;
    private javax.swing.JTextField txtEmail;
    private javax.swing.JPasswordField txtPassword;
    private javax.swing.JPasswordField txtConfirmPassword;
    private javax.swing.JLabel imgShowPassword;
    private javax.swing.JLabel imgShowConfirmPassword;

    private javax.swing.JSeparator sepFirstName;
    private javax.swing.JSeparator sepLastName;
    private javax.swing.JSeparator sepUserName;
    private javax.swing.JSeparator sepEmail;
    private javax.swing.JSeparator sepShowPassword;
    private javax.swing.JSeparator sepShowConfirmPassword;
    private javax.swing.JButton btnRegister;

    private void initComponents() {

        lblTitle = new JLabel();
        lblLogin = new JLabel();
        pnlBg = new JPanel();
        registerPanel = new JPanel();
        jPanel1 = new JPanel();
        txtFirstName = new JTextField();
        txtLastName = new JTextField();
        txtUserName = new JTextField();
        txtEmail = new JTextField();
        txtPassword = new JPasswordField();
        txtConfirmPassword = new JPasswordField();
        imgShowPassword = new JLabel();
        imgShowConfirmPassword = new JLabel();

        sepFirstName = new JSeparator();
        sepLastName = new JSeparator();
        sepUserName = new JSeparator();
        sepEmail = new JSeparator();
        sepShowPassword = new JSeparator();
        sepShowConfirmPassword = new JSeparator();
        btnRegister = new JButton();


        setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);


        lblTitle.setFont(new Font("Tahoma", 0, 24)); // NOI18N
        lblTitle.setForeground(new Color(102, 102, 102));
        lblTitle.setText("Create new Account");

        lblLogin.setText("Already have an account?");

        pnlBg.setBackground(new Color(255, 255, 255));

        registerPanel.setBackground(new Color(255, 255, 255));

        jPanel1.setBackground(new Color(255, 255, 255));
        jPanel1.setLayout(new CardLayout());

        txtFirstName.setFont(new Font("Tahoma", 0, 13)); // NOI18N
        txtFirstName.setForeground(new Color(102, 102, 102));
        txtFirstName.setText("First Name");
        txtFirstName.setToolTipText("");
        txtFirstName.setBorder(null);
        txtFirstName.addFocusListener(new FocusAdapter() {

            public void focusGained(FocusEvent evt) {
                txt_fNameFocusGained(evt);
            }

            public void focusLost(FocusEvent evt) {
                txt_fNameFocusLost(evt);
            }
        });
        txtFirstName.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent evt) {
                txt_fNameActionPerformed(evt);
            }
        });

        txtLastName.setFont(new Font("Tahoma", 0, 13)); // NOI18N
        txtLastName.setForeground(new Color(102, 102, 102));
        txtLastName.setText("Last Name");
        txtLastName.setToolTipText("");
        txtLastName.setBorder(null);
        txtLastName.addFocusListener(new FocusAdapter() {

            public void focusGained(FocusEvent evt) {
                txt_lNameFocusGained(evt);
            }

            public void focusLost(FocusEvent evt) {
                txt_lNameFocusLost(evt);
            }
        });

        txtUserName.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent evt) {
                txt_lNameActionPerformed(evt);
            }
        });

        txtUserName.setFont(new Font("Tahoma", 0, 13)); // NOI18N
        txtUserName.setForeground(new Color(102, 102, 102));
        txtUserName.setText("Username");
        txtUserName.setToolTipText("");
        txtUserName.setBorder(null);
        txtUserName.addFocusListener(new FocusAdapter() {

            public void focusGained(FocusEvent evt) {
                txt_uNameFocusGained(evt);
            }

            public void focusLost(FocusEvent evt) {
                txt_uNameFocusLost(evt);
            }
        });
        txtUserName.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent evt) {
                txt_uNameActionPerformed(evt);
            }
        });


        txtEmail.setFont(new Font("Tahoma", 0, 13)); // NOI18N
        txtEmail.setForeground(new Color(102, 102, 102));
        txtEmail.setText("Email Address");
        txtEmail.setToolTipText("");
        txtEmail.setBorder(null);
        txtEmail.addFocusListener(new FocusAdapter() {

            public void focusGained(FocusEvent evt) {
                txt_emailFocusGained(evt);
            }

            public void focusLost(FocusEvent evt) {
                txt_emailFocusLost(evt);
            }
        });
        txtUserName.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent evt) {
                txt_emailActionPerformed(evt);
            }
        });

        txtPassword.setFont(new java.awt.Font("Tahoma", 0, 13)); // NOI18N
        txtPassword.setForeground(new java.awt.Color(102, 102, 102));
        txtPassword.setText("Enter your password");
        txtPassword.setBorder(null);
        txtPassword.setEchoChar((char) 0);
        txtPassword.addFocusListener(new java.awt.event.FocusAdapter() {

            public void focusGained(java.awt.event.FocusEvent evt) {
                txtPwdFocusGained(evt);
            }

            public void focusLost(java.awt.event.FocusEvent evt) {
                txtPwdFocusLost(evt);
            }
        });

        txtConfirmPassword.setFont(new java.awt.Font("Tahoma", 0, 13)); // NOI18N
        txtConfirmPassword.setForeground(new java.awt.Color(102, 102, 102));
        txtConfirmPassword.setText("Re-enter your password");
        txtConfirmPassword.setBorder(null);
        txtConfirmPassword.setEchoChar((char) 0);
        txtConfirmPassword.addFocusListener(new java.awt.event.FocusAdapter() {

            public void focusGained(java.awt.event.FocusEvent evt) {
                txtRePwdFocusGained(evt);
            }

            public void focusLost(java.awt.event.FocusEvent evt) {
                txtRePwdFocusLost(evt);
            }
        });

        imgShowPassword.setIcon(new javax.swing.ImageIcon(getClass().getResource("img_showPwd.png")));
        imgShowPassword.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mousePressed(java.awt.event.MouseEvent evt) {
                img_showPwdMousePressed(evt);
            }
        });

        imgShowConfirmPassword.setIcon(new javax.swing.ImageIcon(getClass().getResource("img_showPwd.png")));
        imgShowConfirmPassword.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mousePressed(java.awt.event.MouseEvent evt) {
                img_showPwd2MousePressed(evt);
            }
        });

        sepFirstName.setBackground(new Color(255, 255, 255));
        sepFirstName.setForeground(new Color(0, 153, 153));

        sepLastName.setBackground(new Color(255, 255, 255));
        sepLastName.setForeground(new Color(0, 153, 153));

        sepUserName.setBackground(new Color(255, 255, 255));
        sepUserName.setForeground(new Color(0, 153, 153));

        sepEmail.setBackground(new Color(255, 255, 255));
        sepEmail.setForeground(new Color(0, 153, 153));

        sepShowPassword.setBackground(new Color(255, 255, 255));
        sepShowPassword.setForeground(new Color(0, 153, 153));

        sepShowConfirmPassword.setBackground(new Color(255, 255, 255));
        sepShowConfirmPassword.setForeground(new Color(0, 153, 153));

        btnRegister.setBackground(new Color(0, 153, 153));
        btnRegister.setFont(new Font("Tahoma", 1, 14)); // NOI18N
        btnRegister.setForeground(new Color(255, 255, 255));
        btnRegister.setText("Register");
        btnRegister.setBorder(null);

        GroupLayout RegisterLayout = new GroupLayout(registerPanel);
        registerPanel.setLayout(RegisterLayout);
        RegisterLayout.setHorizontalGroup(
                RegisterLayout.createParallelGroup(GroupLayout.Alignment.LEADING)
                        .addGroup(RegisterLayout.createSequentialGroup()
                                .addGroup(RegisterLayout.createParallelGroup(GroupLayout.Alignment.LEADING)
                                        .addGroup(RegisterLayout.createSequentialGroup()
                                                .addGap(48, 48, 48)
                                                .addComponent(lblLogin))
                                        .addGroup(RegisterLayout.createSequentialGroup()
                                                .addGap(27, 27, 27)
                                                .addGroup(RegisterLayout.createParallelGroup(GroupLayout.Alignment.LEADING)
                                                        .addComponent(lblTitle, GroupLayout.PREFERRED_SIZE, 214, GroupLayout.PREFERRED_SIZE)
                                                        .addGroup(RegisterLayout.createSequentialGroup()
                                                                .addGap(16, 16, 16)
                                                                .addGroup(RegisterLayout.createParallelGroup(GroupLayout.Alignment.LEADING)
                                                                        .addGroup(RegisterLayout.createSequentialGroup()
                                                                                .addGap(6, 6, 6)
                                                                                .addComponent(txtPassword, GroupLayout.PREFERRED_SIZE, 197, GroupLayout.PREFERRED_SIZE)
                                                                                .addPreferredGap(LayoutStyle.ComponentPlacement.RELATED)
                                                                                .addComponent(imgShowPassword))
                                                                        .addGroup(RegisterLayout.createSequentialGroup()
                                                                                .addGroup(RegisterLayout.createParallelGroup(GroupLayout.Alignment.LEADING)
                                                                                        .addGroup(RegisterLayout.createSequentialGroup()
                                                                                                .addGap(8, 8, 8)
                                                                                                .addComponent(txtUserName, GroupLayout.PREFERRED_SIZE, 223, GroupLayout.PREFERRED_SIZE))
                                                                                        .addComponent(sepUserName, GroupLayout.PREFERRED_SIZE, 223, GroupLayout.PREFERRED_SIZE)
                                                                                        .addComponent(txtFirstName, GroupLayout.Alignment.TRAILING, GroupLayout.PREFERRED_SIZE, 223, GroupLayout.PREFERRED_SIZE)
                                                                                        .addComponent(sepFirstName, GroupLayout.PREFERRED_SIZE, 223, GroupLayout.PREFERRED_SIZE)
                                                                                        .addComponent(sepShowPassword, GroupLayout.PREFERRED_SIZE, 223, GroupLayout.PREFERRED_SIZE))
                                                                                .addGroup(RegisterLayout.createParallelGroup(GroupLayout.Alignment.LEADING)
                                                                                        .addGroup(RegisterLayout.createSequentialGroup()
                                                                                                .addGap(157, 157, 157)
                                                                                                .addGroup(RegisterLayout.createParallelGroup(GroupLayout.Alignment.LEADING)
                                                                                                        .addGroup(RegisterLayout.createParallelGroup(GroupLayout.Alignment.LEADING)
                                                                                                                .addGroup(GroupLayout.Alignment.TRAILING, RegisterLayout.createSequentialGroup()
                                                                                                                        .addComponent(sepLastName, GroupLayout.PREFERRED_SIZE, 223, GroupLayout.PREFERRED_SIZE)
                                                                                                                        .addGap(8, 8, 8))
                                                                                                                .addComponent(txtLastName, GroupLayout.Alignment.TRAILING, GroupLayout.PREFERRED_SIZE, 223, GroupLayout.PREFERRED_SIZE))
                                                                                                        .addComponent(sepEmail, GroupLayout.PREFERRED_SIZE, 223, GroupLayout.PREFERRED_SIZE)
                                                                                                        .addGroup(RegisterLayout.createSequentialGroup()
                                                                                                                .addGap(6, 6, 6)
                                                                                                                .addGroup(RegisterLayout.createParallelGroup(GroupLayout.Alignment.LEADING)
                                                                                                                        .addComponent(txtConfirmPassword, GroupLayout.PREFERRED_SIZE, 197, GroupLayout.PREFERRED_SIZE)
                                                                                                                        .addComponent(txtEmail, GroupLayout.PREFERRED_SIZE, 225, GroupLayout.PREFERRED_SIZE)))
                                                                                                        .addGroup(RegisterLayout.createParallelGroup(GroupLayout.Alignment.TRAILING)
                                                                                                                .addComponent(btnRegister, GroupLayout.PREFERRED_SIZE, 103, GroupLayout.PREFERRED_SIZE)
                                                                                                                .addComponent(sepShowConfirmPassword, GroupLayout.PREFERRED_SIZE, 223, GroupLayout.PREFERRED_SIZE))))
                                                                                        .addGroup(GroupLayout.Alignment.TRAILING, RegisterLayout.createSequentialGroup()
                                                                                                .addGap(84, 84, 84)
                                                                                                .addComponent(imgShowConfirmPassword)
                                                                                                .addGap(3, 3, 3)))))))))
                                .addGap(0, 72, Short.MAX_VALUE))
        );
        RegisterLayout.setVerticalGroup(
                RegisterLayout.createParallelGroup(GroupLayout.Alignment.LEADING)
                        .addGroup(RegisterLayout.createSequentialGroup()
                                .addGap(24, 24, 24)
                                .addComponent(lblTitle, GroupLayout.PREFERRED_SIZE, 49, GroupLayout.PREFERRED_SIZE)
                                .addGroup(RegisterLayout.createParallelGroup(GroupLayout.Alignment.LEADING)
                                        .addGroup(RegisterLayout.createSequentialGroup()
                                                .addGap(18, 18, 18)
                                                .addComponent(txtFirstName, GroupLayout.PREFERRED_SIZE, 40, GroupLayout.PREFERRED_SIZE)
                                                .addPreferredGap(LayoutStyle.ComponentPlacement.RELATED)
                                                .addComponent(sepFirstName, GroupLayout.PREFERRED_SIZE, 14, GroupLayout.PREFERRED_SIZE)
                                                .addPreferredGap(LayoutStyle.ComponentPlacement.UNRELATED)
                                                .addComponent(txtUserName, GroupLayout.PREFERRED_SIZE, 40, GroupLayout.PREFERRED_SIZE)
                                                .addPreferredGap(LayoutStyle.ComponentPlacement.RELATED)
                                                .addComponent(sepUserName, GroupLayout.PREFERRED_SIZE, 14, GroupLayout.PREFERRED_SIZE)
                                                .addPreferredGap(LayoutStyle.ComponentPlacement.RELATED)
                                                .addGroup(RegisterLayout.createParallelGroup(GroupLayout.Alignment.LEADING, false)
                                                        .addComponent(txtPassword)
                                                        .addComponent(imgShowPassword, GroupLayout.PREFERRED_SIZE, 40, GroupLayout.PREFERRED_SIZE))
                                                .addPreferredGap(LayoutStyle.ComponentPlacement.RELATED)
                                                .addComponent(sepShowPassword, GroupLayout.PREFERRED_SIZE, 14, GroupLayout.PREFERRED_SIZE))
                                        .addGroup(RegisterLayout.createSequentialGroup()
                                                .addGap(18, 18, 18)
                                                .addComponent(txtLastName, GroupLayout.PREFERRED_SIZE, 40, GroupLayout.PREFERRED_SIZE)
                                                .addPreferredGap(LayoutStyle.ComponentPlacement.RELATED)
                                                .addComponent(sepLastName, GroupLayout.PREFERRED_SIZE, 14, GroupLayout.PREFERRED_SIZE)
                                                .addGap(12, 12, 12)
                                                .addComponent(txtEmail, GroupLayout.PREFERRED_SIZE, 40, GroupLayout.PREFERRED_SIZE)
                                                .addPreferredGap(LayoutStyle.ComponentPlacement.RELATED)
                                                .addComponent(sepEmail, GroupLayout.PREFERRED_SIZE, 17, GroupLayout.PREFERRED_SIZE)
                                                .addGap(3, 3, 3)
                                                .addGroup(RegisterLayout.createParallelGroup(GroupLayout.Alignment.LEADING)
                                                        .addComponent(txtConfirmPassword, GroupLayout.PREFERRED_SIZE, 40, GroupLayout.PREFERRED_SIZE)
                                                        .addComponent(imgShowConfirmPassword, GroupLayout.PREFERRED_SIZE, 40, GroupLayout.PREFERRED_SIZE))
                                                .addPreferredGap(LayoutStyle.ComponentPlacement.RELATED)
                                                .addComponent(sepShowConfirmPassword, GroupLayout.PREFERRED_SIZE, 14, GroupLayout.PREFERRED_SIZE)))
                                .addGap(24, 24, 24)
                                .addGroup(RegisterLayout.createParallelGroup(GroupLayout.Alignment.BASELINE)
                                        .addComponent(lblLogin)
                                        .addComponent(btnRegister, GroupLayout.PREFERRED_SIZE, 38, GroupLayout.PREFERRED_SIZE))
                                .addContainerGap(106, Short.MAX_VALUE))
        );

        jPanel1.add(registerPanel, "card2");


        GroupLayout pnl_bgLayout = new GroupLayout(pnlBg);
        pnlBg.setLayout(pnl_bgLayout);
        pnl_bgLayout.setHorizontalGroup(
                pnl_bgLayout.createParallelGroup(GroupLayout.Alignment.LEADING)
                        .addComponent(jPanel1, GroupLayout.DEFAULT_SIZE, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );
        pnl_bgLayout.setVerticalGroup(
                pnl_bgLayout.createParallelGroup(GroupLayout.Alignment.LEADING)
                        .addComponent(jPanel1, GroupLayout.DEFAULT_SIZE, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );

        GroupLayout layout = new GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
                layout.createParallelGroup(GroupLayout.Alignment.LEADING)
                        .addComponent(pnlBg, GroupLayout.Alignment.TRAILING, GroupLayout.DEFAULT_SIZE, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );
        layout.setVerticalGroup(
                layout.createParallelGroup(GroupLayout.Alignment.LEADING)
                        .addComponent(pnlBg, GroupLayout.Alignment.TRAILING, GroupLayout.DEFAULT_SIZE, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );

        pack();

        lblLogin.addMouseListener(new MouseAdapter() {
            public void mouseEntered(MouseEvent e) {
                // Change label color when mouse enters
                lblLogin.setForeground(Color.BLUE);
                lblLogin.setCursor(new Cursor(Cursor.HAND_CURSOR));
            }

            public void mouseExited(MouseEvent e) {
                // Change label color when mouse exits
                lblLogin.setForeground(Color.BLACK);
                lblLogin.setCursor(new Cursor(Cursor.DEFAULT_CURSOR));
            }

            public void mouseClicked(MouseEvent e) {
                // Open login window when label is clicked
                LoginGUI loginGUI = new LoginGUI();
                loginGUI.setVisible(true);
                dispose(); // Close the current RegisterGUI window
            }
        });

        btnRegister.addActionListener(e -> {
            RegisterController registerController = new RegisterController(registerGUI);
            if (registerController.validateFields()) {
                // if all entries correct...
                SuccessGUI successGUI = new SuccessGUI();
                successGUI.setVisible(true);
                dispose(); // Close the current RegisterGUI window
            }
        });
    }


    private void txt_fNameActionPerformed(java.awt.event.ActionEvent evt) {
    }
    private void txt_fNameFocusGained(java.awt.event.FocusEvent evt) {
        txtFirstName.setText(txtFirstName.getText().equals("First Name") ? "" : txtFirstName.getText());
    }

    private void txt_fNameFocusLost(java.awt.event.FocusEvent evt) {
        txtFirstName.setText(txtFirstName.getText().isEmpty() ? "First Name" : txtFirstName.getText());
    }

    private void txt_lNameActionPerformed(java.awt.event.ActionEvent evt) {
    }

    private void txt_lNameFocusGained(java.awt.event.FocusEvent evt) {
        txtLastName.setText(txtLastName.getText().equals("Last Name") ? "" : txtLastName.getText());
    }

    private void txt_lNameFocusLost(java.awt.event.FocusEvent evt) {
        txtLastName.setText(txtLastName.getText().isEmpty() ? "Last Name" : txtLastName.getText());
    }

    private void txt_uNameActionPerformed(java.awt.event.ActionEvent evt) {
    }

    private void txt_uNameFocusGained(FocusEvent evt) {
        txtUserName.setText(txtUserName.getText().equals("Username") ? "" : txtUserName.getText());
    }

    private void txt_uNameFocusLost(FocusEvent evt) {
        txtUserName.setText(txtUserName.getText().isEmpty() ? "Username" : txtUserName.getText());
    }

    private void txt_emailActionPerformed(java.awt.event.ActionEvent evt) {
    }

    private void txt_emailFocusGained(java.awt.event.FocusEvent evt) {
        txtEmail.setText(txtEmail.getText().equals("Email Address") ? "" : txtEmail.getText());
    }

    private void txt_emailFocusLost(java.awt.event.FocusEvent evt) {
        txtEmail.setText(txtEmail.getText().isEmpty() ? "Email Address" : txtEmail.getText());
    }

    private void handlePasswordFieldFocus(JPasswordField field) {
        if (field.getText().equals("Enter your password") || field.getText().equals("Re-enter your password")) {
            field.setText("");
            if (!isPasswordShown) {
                field.setEchoChar('*'); // Show password when text is cleared, but only if it was previously hidden
            }
        }
    }

    private void handlePasswordFieldBlur(JPasswordField field) {
        if (field.getPassword().length == 0) {
            field.setText("Enter your password");
            field.setEchoChar((char) 0); // Hide password when default text is restored
        }
        // Select all text to hide password when focus is lost
        field.selectAll();
    }

    private void showPasswordField(JPasswordField field, JLabel icon) {
        field.setEchoChar((char) 0);
        icon.setIcon(new javax.swing.ImageIcon(getClass().getResource("img_uname.png")));
    }

    private void hidePasswordField(JPasswordField field, JLabel icon) {
        if (!field.getText().equals("Enter your password")) {
            field.setEchoChar('*');
        }
        icon.setIcon(new javax.swing.ImageIcon(getClass().getResource("img_showPwd.png")));
    }

    private void txtPwdFocusGained(java.awt.event.FocusEvent evt) {
        handlePasswordFieldFocus(txtPassword);
    }

    private void txtPwdFocusLost(java.awt.event.FocusEvent evt) {
        handlePasswordFieldBlur(txtPassword);
    }

    private void txtRePwdFocusGained(java.awt.event.FocusEvent evt) {
        handlePasswordFieldFocus(txtConfirmPassword);
    }

    private void txtRePwdFocusLost(java.awt.event.FocusEvent evt) {
        handlePasswordFieldBlur(txtConfirmPassword);
    }

    private void img_showPwdMousePressed(java.awt.event.MouseEvent evt) {
        isPasswordShown = !isPasswordShown;
        if (isPasswordShown) {
            showPasswordField(txtPassword, imgShowPassword);
        } else {
            hidePasswordField(txtPassword, imgShowPassword);
        }
    }

    private void img_showPwd2MousePressed(java.awt.event.MouseEvent evt) {
        isPasswordShown = !isPasswordShown;
        if (isPasswordShown) {
            showPasswordField(txtConfirmPassword, imgShowConfirmPassword);
        } else {
            hidePasswordField(txtConfirmPassword, imgShowConfirmPassword);
        }
    }

    public JTextField getTxtFirstName() {
        return txtFirstName;
    }

    public JTextField getTxtLastName() {
        return txtLastName;
    }
    public JTextField getTxtUsername() {
        return txtUserName;
    }
    public JTextField getTxtEmail() {
        return txtEmail;
    }
    public JPasswordField getTxtPassword() {
        return txtPassword;
    }
    public JPasswordField getTxtConfirmPassword() {
        return txtConfirmPassword;
    }

}
